<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width='device-width', initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const arr = [
        { id: 1, value: 1, parent: null },
        { id: 2, value: 2, parent: 1 },
        { id: 3, value: 3, parent: 2 },
        { id: 4, value: 4, parent: 1 },
      ]
      function array2tree(arr) {
        const map = new Map()
        arr.forEach(node => {
          map.set(node.id, { ...node, children: [] })
        })

        const root = []
        arr.forEach(node => {
          if (node.parent === null) {
            root.push(map.get(node.id))
          } else {
            const parent = map.get(node.parent)
            parent.children.push(map.get(node.id))
          }
        })
        return root
      }
      console.log(array2tree(arr))
    </script>
  </body>
</html>
